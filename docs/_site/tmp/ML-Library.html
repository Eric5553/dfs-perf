<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Fault Tolerant Tachyon Cluster - Octopus 0.1 Documentation</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
    </style>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>

    <link rel="stylesheet" href="css/pygments-default.css">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-47563775-2', 'tachyon-project.org');
        ga('send', 'pageview');
    </script>

</head>
<body>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade
    your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install
    Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->

<!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

<div class="navbar navbar-fixed-top" id="topbar">
    <div class="navbar-inner">
        <div class="container">
            <div class="brand">
                <div style="position:absolute;">
                    <a href="index.html">
                        <img src="img/logo.png" alt="Octopus Logo" style="height:50px;"/>
                    </a>
                </div>
				<div style="float:right;margin-top:30px;">
					<span class="version">0.1</span>
				</div>
            </div>
            <ul class="nav">
                <li><a href="index.html">Overview</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Programming Guides<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Quick-Start.html">Quick Start</a></li>
                        <li><a href="Examples.html">Examples</a></li>
                        <li><a href="ML-Library.html">ML Library</a></li>
						<li><a href="API-Docs.html">API Docs</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Deploying<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Pre-built-Ones.html">Pre-built Ones</a></li>
						<li><a href="Running-Octopus-Locally.html">Local Mode</a></li>
						<li><a href="Running-Octopus-on-a-Cluster.html">Cluster Mode</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="FAQ.html">FAQ</a></li>
                        <li><a href="http://pasa-bigdata.nju.edu.cn:61111/jira/browse/OCT/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">JIRA</a></li>
                        <li><a href="https://groups.google.com/forum/#!forum/octopus-user">Mail List</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">More<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Configuration-Settings.html">Configuration Settings</a></li>
                        <li><a href="Download.html">Download</a></li>
						<li><a href="R-IDEs.html">User IDEs</a></li>
                        <li><a href="Development.html">Development</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="container" id="content">
    <h1 class="title">Fault Tolerant Tachyon Cluster</h1>

    <h1 id="prerequisites">Prerequisites</h1>

<p>There are two prerequisites to set up a fault tolerant Tachyon cluster,
<a href="Fault-Tolerant-Tachyon-Cluster#zookeeper">ZooKeeper</a>, and a shared reliable under filesystem.
Currently <a href="Fault-Tolerant-Tachyon-Cluster#hdfs">HDFS</a> and S3 can be used as under
layers. Also, please see <a href="Configuration-Settings.html">Configuration Settings</a>
for a more succinct description of all the configuration options Tachyon has.</p>

<h2 id="hdfs">HDFS</h2>

<p>For information about setting up HDFS, see
<a href="http://wiki.apache.org/hadoop/GettingStartedWithHadoop">Getting Started With Hadoop</a>.</p>

<p>Note the name of machine running your NameNode, as you will need to tell Tachyon where this is. In
your tachyon-env.sh (or environment) you’ll need to include:</p>

<pre><code>export TACHYON_UNDERFS_ADDRESS=hdfs://[namenodeserver]:[namenodeport]
</code></pre>

<h2 id="zookeeper">ZooKeeper</h2>

<p>Tachyon uses ZooKeeper to achieve master fault tolerance. It is also required in order to use shared
storage (such as HDFS) for writing logs and images.</p>

<p>ZooKeeper must be set up independently (see
<a href="http://zookeeper.apache.org/doc/r3.1.2/zookeeperStarted.html">ZooKeeper Getting Started</a>)
and then in conf/tachyon-env.sh, these java options should be used:</p>

<table class="table">
<tr><th>Property Name</th><th>Example</th><th>Meaning</th></tr>
<tr>
  <td>tachyon.usezookeeper</td>
  <td>true</td>
  <td>
     Whether or not Master processes should use ZooKeeper.
  </td>
</tr>
<tr>
  <td>tachyon.zookeeper.address</td>
  <td>localhost:2181</td>
  <td>
    The hostname and port ZooKeeper is running on.
  </td>
</tr>
</table>

<h2 id="configuring-tachyon">Configuring Tachyon</h2>

<p>Once you have HDFS and ZooKeeper running, you need to set up your tachyon-env.sh appropriately on
each host. Some settings are relevant for Master Nodes, while others for Workers. Here we separate
these concerns, however it is also fine to run a Master and Worker(s) on a single node.</p>

<h2 id="externally-visible-address">Externally Visible Address</h2>

<p>In the following sections we refer to an “externally visible address”. This is simply the address of
an interface on the machine being configured that can be seen by other nodes in the Tachyon cluster.
On EC2, you should the “ip-x-x-x-x” address. In particular, don’t use localhost or 127.0.0.1, as
other nodes will then be unable to reach your node.</p>

<h2 id="master-configuration">Master Configuration</h2>

<p>For a master node the ZooKeeper and HDFS variables must be set, as described above.</p>

<p>In addition, the following variable must also be set:</p>

<pre><code>export TACHYON_MASTER_ADDRESS=[externally visible address of this machine]
</code></pre>

<p>Finally, configure your <code>TACHYON_JAVA_OPTS</code> to include:</p>

<pre><code>-Dtachyon.master.journal.folder=hdfs://[namenodeserver]:[namenodeport]/tachyon/journal
</code></pre>

<p>You can then start a master node on the machine and it will either become leader, or wait until the
current master dies and then offer to be the new leader.</p>

<h2 id="worker-configuration">Worker Configuration</h2>

<p>For a worker, it is only necessary to set the <code>TACHYON_MASTER_ADDRESS</code> option as:</p>

<pre><code>export TACHYON_MASTER_ADDRESS=[address of one of the master nodes in the system]
</code></pre>

<p>Any of the configured and running masters can be used, as they will inform the worker of the current
leader.</p>

    <!-- Main hero unit for a primary marketing message or call to action -->
    <!--<div class="hero-unit">
        <h1>Hello, world!</h1>
        <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
            </div>-->

    <!-- Example row of columns -->
    <!--<div class="row">
        <div class="span4">
            <h2>Heading</h2>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
                <div class="span4">
                    <h2>Heading</h2>
                    <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
               </div>
                <div class="span4">
                    <h2>Heading</h2>
                    <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
            </div>

            <hr>-->

    <footer>
        <hr>
        <p style="text-align: center; veritcal-align: middle; color: #999;">
            Octopus is a project developed at the Nanjing University
            <a href="http://pasa-bigdata.nju.edu.cn/">
                PASALab.
            </a> All Rights Reserved.
        </p>
    </footer>

</div>
<!-- /container -->

<script src="js/vendor/jquery-1.8.0.min.js"></script>
<script src="js/vendor/bootstrap.min.js"></script>
<script src="js/main.js"></script>

<!-- A script to fix internal hash links because we have an overlapping top bar.
     Based on https://github.com/twitter/bootstrap/issues/193#issuecomment-2281510 -->
<script>
    $(function () {
        function maybeScrollToHash() {
            if (window.location.hash && $(window.location.hash).length) {
                var newTop = $(window.location.hash).offset().top - $('#topbar').height() - 5;
                $(window).scrollTop(newTop);
            }
        }

        $(window).bind('hashchange', function () {
            maybeScrollToHash();
        });
        // Scroll now too in case we had opened the page on a hash, but wait 1 ms because some browsers
        // will try to do *their* initial scroll after running the onReady handler.
        setTimeout(function () {
            maybeScrollToHash();
        }, 1)
    })
</script>

</body>
</html>
