<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Building Tachyon Master Branch - Octopus 0.1 Documentation</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
    </style>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>

    <link rel="stylesheet" href="css/pygments-default.css">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-47563775-2', 'tachyon-project.org');
        ga('send', 'pageview');
    </script>

</head>
<body>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade
    your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install
    Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->

<!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

<div class="navbar navbar-fixed-top" id="topbar">
    <div class="navbar-inner">
        <div class="container">
            <div class="brand">
                <div style="position:absolute;">
                    <a href="index.html">
                        <img src="img/logo.png" alt="Octopus Logo" style="height:50px;"/>
                    </a>
                </div>
				<div style="float:right;margin-top:30px;">
					<span class="version">0.1</span>
				</div>
            </div>
            <ul class="nav">
                <li><a href="index.html">Overview</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Programming Guides<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Quick-Start.html">Quick Start</a></li>
                        <li><a href="Examples.html">Examples</a></li>
                        <li><a href="ML-Library.html">ML Library</a></li>
						<li><a href="API-Docs.html">API Docs</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Deploying<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Pre-built-Ones.html">Pre-built Ones</a></li>
						<li><a href="Running-Octopus-Locally.html">Local Mode</a></li>
						<li><a href="Running-Octopus-on-a-Cluster.html">Cluster Mode</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="FAQ.html">FAQ</a></li>
                        <li><a href="http://pasa-bigdata.nju.edu.cn:61111/jira/browse/OCT/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">JIRA</a></li>
                        <li><a href="https://groups.google.com/forum/#!forum/octopus-user">Mail List</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">More<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Configuration-Settings.html">Configuration Settings</a></li>
                        <li><a href="Download.html">Download</a></li>
						<li><a href="R-IDEs.html">User IDEs</a></li>
                        <li><a href="Development.html">Development</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="container" id="content">
    <h1 class="title">Building Tachyon Master Branch</h1>

    <p>This guide describes how to compile Tachyon from the beginning.</p>

<p>The prerequisite for this guide is that you have <a href="Java-Setup.html">Java 6 (or above)</a>,
<a href="Maven.html">Maven</a>, and <a href="Thrift.html">Thrift 0.9.1</a> (Optional) installed.</p>

<p>Checkout the Tachyon master branch from Github and package:</p>

<pre><code>$ git clone git://github.com/amplab/tachyon.git
$ cd tachyon
$ mvn install
</code></pre>

<p>If you want to build a particular version of Tachyon, for example 0.5.0,
please do <code>git checkout v0.5.0</code> after <code>cd tachyon</code>.</p>

<p>The Maven build system fetches its dependencies, compiles, runs system’s unit tests, and package the
system. If this is the first time you are building the project, it can take a while to download all
the dependencies. Subsequent builds, however, will be much faster.</p>

<p>Once it is built, you can start Tachyon:</p>

<pre><code>$ cp conf/tachyon-env.sh.template conf/tachyon-env.sh
$ ./bin/tachyon format
$ ./bin/tachyon-start.sh local
</code></pre>

<p>To verify that Tachyon is running, you can visit <a href="http://localhost:19999">http://localhost:19999</a> or
check the log in the folder tachyon/logs. You can also run a simple program:</p>

<pre><code>$ ./bin/tachyon runTest Basic CACHE_THROUGH
</code></pre>

<p>You should be able to see results similar to the following:</p>

<pre><code>/Basic_File_CACHE_THROUGH has been removed
2014-02-02 09:32:02,760 INFO   (TachyonFS.java:connect) - Trying to connect master @ localhost/127.0.0.1:19998
2014-02-02 09:32:02,791 INFO   (MasterClient.java:getUserId) - User registered at the master localhost/127.0.0.1:19998 got UserId 10
2014-02-02 09:32:02,792 INFO   (TachyonFS.java:connect) - Trying to get local worker host : hy-ubuntu
2014-02-02 09:32:02,800 INFO   (TachyonFS.java:connect) - Connecting local worker @ hy-ubuntu/127.0.1.1:29998
2014-02-02 09:32:02,819 INFO   (CommonUtils.java:printTimeTakenMs) - createFile with fileId 18 took 60 ms.
2014-02-02 09:32:03,194 INFO   (TachyonFS.java:createAndGetUserTempFolder) - Folder /mnt/ramdisk/tachyonworker/users/10 was created!
2014-02-02 09:32:03,198 INFO   (BlockOutStream.java:&lt;init&gt;) - /mnt/ramdisk/tachyonworker/users/10/19327352832 was created!
Passed the test!
</code></pre>

<p>You can also stop the system by using:</p>

<pre><code>$ ./bin/tachyon-stop.sh
</code></pre>

<h1 id="unit-tests">Unit tests</h1>

<p>To run all unit tests:</p>

<pre><code>$ mvn test
</code></pre>

<p>To run all the unit tests with under filesystem other than local filesystem:</p>

<pre><code>$ mvn test [ -Dhadoop.version=x.x.x ] [ -Dtest.profile=hdfs ]
</code></pre>

<p>Current supported profiles:</p>

<pre><code>local #default, uses local disk
hdfs # uses hadoop's minicluster
glusterfs # uses glusterfs
</code></pre>

<p>To have the logs output to STDOUT, append the following to the <code>mvn</code> command</p>

<pre><code>-Dtest.output.redirect=false -Dtachyon.root.logger=DEBUG,CONSOLE
</code></pre>

<h1 id="distro-support">Distro Support</h1>

<p>To build master against one of the different distros of hadoop, you only need to change the <code>hadoop.version</code>.</p>

<h2 id="apache">Apache</h2>

<p>All main builds are from Apache so all Apache releases can be used directly</p>

<pre><code>-Dhadoop.version=2.2.0
-Dhadoop.version=2.3.0
-Dhadoop.version=2.4.0
</code></pre>

<h2 id="cloudera">Cloudera</h2>

<p>To build against Cloudera’s releases, just use a version like <code>$apacheRelease-cdh$cdhRelease</code></p>

<pre><code>-Dhadoop.version=2.3.0-cdh5.1.0
-Dhadoop.version=2.0.0-cdh4.7.0
</code></pre>

<h2 id="mapr">MapR</h2>

<p>To build against a MapR release</p>

<pre><code>-Dhadoop.version=2.3.0-mapr-4.0.0-FCS
</code></pre>

<h2 id="pivotal">Pivotal</h2>

<p>To build against a Pivotal release, just use a version like <code>$apacheRelease-gphd-$pivotalRelease</code></p>

<pre><code>-Dhadoop.version=2.0.5-alpha-gphd-2.1.1.0
-Dhadoop.version=2.2.0-gphd-3.0.1.0
</code></pre>

<h2 id="hortonworks">Hortonworks</h2>

<p>To build against a Hortonworks release, just use a version like <code>$apacheRelease.$hortonRelease</code></p>

<pre><code>-Dhadoop.version=2.1.0.2.0.5.0-67
-Dhadoop.version=2.2.0.2.1.0.0-92
-Dhadoop.version=2.4.0.2.1.3.0-563
</code></pre>

<h1 id="system-settings">System Settings</h1>

<p>Some times you will need to play with a few system settings in order to have the unit tests pass locally.  A common setting that may need to be set is ulimit.</p>

<h2 id="ulimit-mac">ulimit Mac</h2>

<p>In order to increase the number of files and procs allowed, run the following</p>

<p>```bash
sudo launchctl limit maxfiles 16384 16384
sudo launchctl limit maxproc 2048 2048</p>

<p>sudo ulimit -n 16384
sudo ulimit -u 2048
```</p>

    <!-- Main hero unit for a primary marketing message or call to action -->
    <!--<div class="hero-unit">
        <h1>Hello, world!</h1>
        <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
            </div>-->

    <!-- Example row of columns -->
    <!--<div class="row">
        <div class="span4">
            <h2>Heading</h2>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
                <div class="span4">
                    <h2>Heading</h2>
                    <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
               </div>
                <div class="span4">
                    <h2>Heading</h2>
                    <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
            </div>

            <hr>-->

    <footer>
        <hr>
        <p style="text-align: center; veritcal-align: middle; color: #999;">
            Octopus is a project developed at the Nanjing University
            <a href="http://pasa-bigdata.nju.edu.cn/">
                PASALab.
            </a> All Rights Reserved.
        </p>
    </footer>

</div>
<!-- /container -->

<script src="js/vendor/jquery-1.8.0.min.js"></script>
<script src="js/vendor/bootstrap.min.js"></script>
<script src="js/main.js"></script>

<!-- A script to fix internal hash links because we have an overlapping top bar.
     Based on https://github.com/twitter/bootstrap/issues/193#issuecomment-2281510 -->
<script>
    $(function () {
        function maybeScrollToHash() {
            if (window.location.hash && $(window.location.hash).length) {
                var newTop = $(window.location.hash).offset().top - $('#topbar').height() - 5;
                $(window).scrollTop(newTop);
            }
        }

        $(window).bind('hashchange', function () {
            maybeScrollToHash();
        });
        // Scroll now too in case we had opened the page on a hash, but wait 1 ms because some browsers
        // will try to do *their* initial scroll after running the onReady handler.
        setTimeout(function () {
            maybeScrollToHash();
        }, 1)
    })
</script>

</body>
</html>
