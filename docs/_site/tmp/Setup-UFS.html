<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Under File Systems - Octopus 0.1 Documentation</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
    </style>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>

    <link rel="stylesheet" href="css/pygments-default.css">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-47563775-2', 'tachyon-project.org');
        ga('send', 'pageview');
    </script>

</head>
<body>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade
    your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install
    Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->

<!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

<div class="navbar navbar-fixed-top" id="topbar">
    <div class="navbar-inner">
        <div class="container">
            <div class="brand">
                <div style="position:absolute;">
                    <a href="index.html">
                        <img src="img/logo.png" alt="Octopus Logo" style="height:50px;"/>
                    </a>
                </div>
				<div style="float:right;margin-top:30px;">
					<span class="version">0.1</span>
				</div>
            </div>
            <ul class="nav">
                <li><a href="index.html">Overview</a></li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Programming Guides<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Quick-Start.html">Quick Start</a></li>
                        <li><a href="Examples.html">Examples</a></li>
                        <li><a href="ML-Library.html">ML Library</a></li>
						<li><a href="API-Docs.html">API Docs</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Deploying<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Pre-built-Ones.html">Pre-built Ones</a></li>
						<li><a href="Running-Octopus-Locally.html">Local Mode</a></li>
						<li><a href="Running-Octopus-on-a-Cluster.html">Cluster Mode</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="FAQ.html">FAQ</a></li>
                        <li><a href="http://pasa-bigdata.nju.edu.cn:61111/jira/browse/OCT/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">JIRA</a></li>
                        <li><a href="https://groups.google.com/forum/#!forum/octopus-user">Mail List</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">More<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="Configuration-Settings.html">Configuration Settings</a></li>
                        <li><a href="Download.html">Download</a></li>
						<li><a href="R-IDEs.html">User IDEs</a></li>
                        <li><a href="Development.html">Development</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="container" id="content">
    <h1 class="title">Under File Systems</h1>

    <p>Tachyon can run with different under file systems. This guide describes how to accomplish the
following:</p>

<ul>
  <li>Configure Tachyon with different supported under file systems.</li>
  <li>Add new under file systems.</li>
</ul>

<h1 id="setup-supported-under-file-systems">Setup supported under file systems</h1>

<h2 id="hdfs">HDFS</h2>

<p>The additional prerequisite for this part is <a href="http://www.michael-noll.com/tutorials
/running-hadoop-on-ubuntu-linux-multi-node-cluster/">Hadoop HDFS</a>. By default, Tachyon is set to use HDFS version
1.0.4. You can use another Hadoop version by changing the hadoop.version tag in pom.xml in Tachyon
and recompiling it. You can also set the hadoop version when compiling with maven:</p>

<pre><code>$ mvn -Dhadoop.version=2.2.0 clean package
</code></pre>

<p>Edit <code>tachyon-env.sh</code> file. Setup <code>TACHYON_UNDERFS_ADDRESS=hdfs://HDFS_HOSTNAME:HDFS_IP</code>. You may
also need to setup <code>JAVA_HOME</code> in the same file.</p>

<h2 id="amazon-s3">Amazon S3</h2>

<p>Edit <code>tachyon-env.sh</code> file. Setup <code>TACHYON_UNDERFS_ADDRESS=s3://s3address</code> and the necessary
credentials such as <code>fs.s3n.awsAccessKeyId</code> and <code>fs.s3n.awsSecretAccessKey</code> under
<code>TACHYON_JAVA_OPTS</code>. You may also need to setup <code>JAVA_HOME</code> in the same file.</p>

<h2 id="glusterfs">GlusterFS</h2>

<h3 id="prerequisites">Prerequisites</h3>

<p>You need to install <a href="http://www.gluster.org">GlusterFS</a> on your cluster and create a GlusterFS
volume <a href="http://www.gluster.org/community/documentation/index.php/QuickStart">GlusterFS usage</a>.</p>

<p>Compile Tachyon with GlusterFS: <code>mvn clean install -Dtest.profile=glusterfs -Dhadoop.version=2.3.0
-Dtachyon.underfs.glusterfs.mounts=/vol -Dtachyon.underfs.glusterfs.volumes=testvol </code>, where /vol is
a valid GlusterFS mount point.</p>

<h3 id="mount-a-glusterfs-filesystem">Mount a GlusterFS filesystem</h3>

<p>Assume the GlusterFS bricks are co-located with Tachyon nodes, the GlusterFS volume name is <code>gsvol</code>,
and the mount point is <code>/vol</code>.</p>

<p>On each Tachyon node, edit <code>/etc/fstab</code> and add <code>localhost:gsvol /vol glusterfs</code>. Then mount the
GlusterFS filesystem:</p>

<pre><code>$ mount -a -t glusterfs
</code></pre>

<h3 id="configure-tachyon-to-use-glusterfs-filesystem">Configure Tachyon to use GlusterFS filesystem</h3>

<p>Next, config Tachyon in <code>tachyon</code> folder:</p>

<pre><code>$ cd /root/tachyon/conf
$ cp tachyon-glusterfs-env.sh.template tachyon-env.sh
</code></pre>

<p>Add the following lines to the <code>tachyon-env.sh</code> file:</p>

<pre><code>TACHYON_UNDERFS_GLUSTER_VOLUMES=tachyon_vol
TACHYON_UNDERFS_GLUSTER_MOUNTS=/vol
</code></pre>

<p>Sync the configuration to all nodes.</p>

<h3 id="format-the-filesystem">Format the filesystem</h3>

<pre><code>$ cd /root/tachyon/
$ ./bin/tachyon format
</code></pre>

<h3 id="verify-that-glusterfs-is-ready-to-use">Verify that GlusterFS is ready to use</h3>

<pre><code>$ cd /vol
$ ls
</code></pre>

<p>You should find that a tachyon folder has been created.</p>

<h1 id="add-other-under-file-system">Add other under file system</h1>

<p>Besides the above under file system, Tachyon can run on top of other under file system. In order
to do so, a user should implement this
<a href="https://github.com/amplab/tachyon/blob/master/core/src/main/java/tachyon/UnderFileSystem.java">UnderFileSystem</a>
interface. Here are the implementations of
<a href="https://github.com/amplab/tachyon/blob/master/core/src/main/java/tachyon/UnderFileSystemHdfs.java">HDFS</a>
and <a href="https://github.com/amplab/tachyon/blob/master/core/src/main/java/tachyon/UnderFileSystemSingleLocal.java">Local File System</a>.</p>

    <!-- Main hero unit for a primary marketing message or call to action -->
    <!--<div class="hero-unit">
        <h1>Hello, world!</h1>
        <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
            </div>-->

    <!-- Example row of columns -->
    <!--<div class="row">
        <div class="span4">
            <h2>Heading</h2>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
                <div class="span4">
                    <h2>Heading</h2>
                    <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
               </div>
                <div class="span4">
                    <h2>Heading</h2>
                    <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
            </div>

            <hr>-->

    <footer>
        <hr>
        <p style="text-align: center; veritcal-align: middle; color: #999;">
            Octopus is a project developed at the Nanjing University
            <a href="http://pasa-bigdata.nju.edu.cn/">
                PASALab.
            </a> All Rights Reserved.
        </p>
    </footer>

</div>
<!-- /container -->

<script src="js/vendor/jquery-1.8.0.min.js"></script>
<script src="js/vendor/bootstrap.min.js"></script>
<script src="js/main.js"></script>

<!-- A script to fix internal hash links because we have an overlapping top bar.
     Based on https://github.com/twitter/bootstrap/issues/193#issuecomment-2281510 -->
<script>
    $(function () {
        function maybeScrollToHash() {
            if (window.location.hash && $(window.location.hash).length) {
                var newTop = $(window.location.hash).offset().top - $('#topbar').height() - 5;
                $(window).scrollTop(newTop);
            }
        }

        $(window).bind('hashchange', function () {
            maybeScrollToHash();
        });
        // Scroll now too in case we had opened the page on a hash, but wait 1 ms because some browsers
        // will try to do *their* initial scroll after running the onReady handler.
        setTimeout(function () {
            maybeScrollToHash();
        }, 1)
    })
</script>

</body>
</html>
